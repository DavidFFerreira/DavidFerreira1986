<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Citizen Ship Prices</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            text-align: center;
        }
        table {
            width: 100%;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<h1>Star Citizen Ship Prices</h1>

<div id="tables"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<script>
    const files = {
        "Pyro - Major Stations": "https://raw.githubusercontent.com/DavidFFerreira/DavidFerreira1986/refs/heads/main/pyroShipList.txt",
        "Hurston": "https://raw.githubusercontent.com/DavidFFerreira/DavidFerreira1986/refs/heads/main/HurstonShipList.txt",
        "Arrcorp": "https://raw.githubusercontent.com/DavidFFerreira/DavidFerreira1986/refs/heads/main/ArrcorpShipList.txt",
        "Crusader": "https://raw.githubusercontent.com/DavidFFerreira/DavidFerreira1986/refs/heads/main/CrusaderShipList.txt"
    };

    function fetchData(fileUrl, tableId) {
        $.ajax({
            url: fileUrl,
            type: 'GET',
            dataType: 'text',
            success: function(data) {
                const rows = data.trim().split('\n');
                const tableData = rows.map(row => row.split('\t'));
                generateTable(tableData, tableId);
            },
            error: function() {
                alert('Erro ao buscar o arquivo: ' + fileUrl);
            }
        });
    }

    function generateTable(data, tableId) {
        const table = $('<table class="display" id="' + tableId + '"></table>');
        const thead = $('<thead><tr><th>Ship</th><th>Price In Game (aUEC)</th><th>Location</th></tr></thead>');
        const tbody = $('<tbody></tbody>');

        data.forEach(row => {
            const tr = $('<tr></tr>');
            row.forEach(cell => tr.append('<td>' + cell + '</td>'));
            tbody.append(tr);
        });

        table.append(thead).append(tbody);
        $('#tables').append('<h2>' + tableId + '</h2>').append(table);

        $('#' + tableId).DataTable({
            "paging": true,
            "searching": true,
            "ordering": true,
            "order": [[1, 'asc']]
        });
    }

    $(document).ready(function() {
        for (const [tableName, fileUrl] of Object.entries(files)) {
            fetchData(fileUrl, tableName);
        }
    });
</script>

</body>
</html>
